### 登录

```mysql
mysql -uroot -p123456
```



### 增

#### 创建表

```mysql
create table table_name
(
	id INT(11),
    name VARCHAR(255)
);
```

#### 插入数据

+ 插入数据

  ```mysql
  insert into table_name values(1001,'Tom');
  ```



### 删

### 改

### 查

#### 显示数据库

```mysql
show databases
```

+ information_schema

  数据库基本信息，表名称，基本权限等。

+ mysql

  保存数据库服务器运行时的基本信息，系统文件夹，字符集等

+ performance_schema、sys

  监控mysql各类性能指标

#### 查询数据

##### 查询所有数据

```mysql
SELECT * FROM table_name;
```

##### 选择指定列查询

```mysql
SELECT employee_id emp_id,last_name AS lname,salary,department_id "dept_id" FROM employees;
# emp_id、lname、"dept_id" 别名的三种方式
```

##### 去除重复行

```mysql
SELECT DISTINCT department_id FROM employees;
```

##### 空值运算

1. 空值：null

2. null 不等同于0，‘’，’null’

3. 结果一定也为空

   ```mysql
   # 解决方案：如果是null则替换为0
   SELECT employee_id,salary "月工资",salary * (1 + IFNULL(commission_pct,0)) * 12 "年工资",commission_pct FROM employees;
   ```

##### 查询常数

```mysql
SELECT '尚硅谷' as corporation, last_name FROM employees;
```

##### 显示表结构

显示表中字段的详细信息

```mysql
DESCRIBE employees;
DESC employees;
```

##### 运算符

+ 算术运算符：==+ - * / div % mod==；在SQL中，+没有连接的作用，就表示加法运算。此时会将字符串转换为数值(隐式转换)

+ 比较运算符：=== <=> <> != < <= > >===

  1. 基本用法

     + = 的使用

       ```mysql
       SELECT 1 = 2, 1!= 2, 1 = '1', 1 = 'a',0 = 'a' FROM DUAL;
       # 字符串存在隐式转换，如果转换数值不成功，则看作0
       
       SELECT 1 = NULL, NULL = NULL FROM DUAL;
       # 只要有Null参与判断，结果就为Null
       ```

     + <=>：安全等于。记忆：为NULL而生

       ```mysql
       SELECT 1 <=> 2,1 <=> '1', 1<=> 'a', 0 <=>'a' FROM DUAL;
       SELECT 1 <=> NULL, NULL <=> NULL FROM DUAL;
       ```

     + <>：不等于

       ```mysql
       SELECT 3<>2,'4' <> NULL, '' != NULL, NULL != NULL FROM DUAL;
       ```

  2. 函数

     + IS NULL | IS NOT NULL | ISNULL

       ```mysql
       # 查询表中commission_pct为NULL的数据有哪些
       SELECT last_name,salary,commission_pct FROM employees WHERE commission_pct IS NULL; # 或
       SELECT last_name,salary,commission_pct FROM employees WHERE ISNULL(commission_pct);
       
       # 查询表中commission_pct不为NULL的数据有哪些
       SELECT last_name,salary,commission_pct FROM employees WHERE commission_pct IS NOT NULL; # 或
       SELECT last_name,salary,commission_pct FROM employees WHERE NOT commission_pct <=> NULL;
       ```

     + LEAST() | GREATEST()

       ```mysql
       SELECT LEAST('g','b','t','m'), GREATEST('g','b','t','m') FROM DUAL;
       SELECT LEAST(first_name,last_name),LEAST(LENGTH(first_name),LENGTH(last_name)) FROM employees;
       ```

     + BETWEEN 条件1 AND 条件2 (查询条件1和条件2范围内的数据，包含边界)

       ```mysql
       # 查询工资在6000 到 8000 的员工信息
       SELECT employee_id,last_name,salary FROM employees WHERE salary >= 6000 && salary <= 8000;
       SELECT employee_id,last_name,salary FROM employees WHERE salary BETWEEN 6000 AND 8000;
       
       # 查询工资不在6000 到 8000 的员工信息
       SELECT employee_id,last_name,salary FROM employees WHERE salary < 6000 OR salary > 8000;
       SELECT employee_id,last_name,salary FROM employees WHERE salary NOT BETWEEN 6000 AND 8000;
       ```

     + IN(SET) | NOT IN (SET) 离散的值而不是范围

       ```mysql
       # 查询部门为10,20,30的员工信息
       SELECT last_name,salary,department_id FROM employees WHERE department_id IN (10,20,30);
       # 查询工资不是6000,7000,8000的员工信息
       SELECT last_name,salary,department_id FROM employees WHERE salary NOT IN (6000,7000,8000);
       ```

     + LIKE 模糊查询

       ```mysql
       # 查询last_name中包含字符'a'的员工信息
       # %：代表不确定个数的字符
       SELECT last_name FROM employees WHERE last_name LIKE '%a%'; 
       
       # 查询last_name中包含字符'a'且包含字符'e'的员工信息
       # 写法一
       SELECT last_name FROM employees WHERE last_name LIKE '%a%' AND last_name LIKE '%e%';
       # 写法二
       SELECT last_name FROM employees WHERE last_name LIKE '%a%e%' OR last_name LIKE '%e%a%';
       
       # 查询第2个字符是'a'的员工信息
       # _：代表一个不确定的字符
       SELECT last_name FROM employees WHERE last_name LIKE '_a%';
       
       # 查询第2个字符是'_'且第3个字符是'a'的员工信息
       SELECT last_name FROM employees WHERE last_name LIKE '_\_a%';
       # 或者(了解)
       SELECT last_name FROM employees WHERE last_name LIKE '_$_a%' ESCAPE '$';
       ```

     + REGEXP | RLIKE：正则表达式
     
       
  
+ 逻辑运算符 ==OR || AND && NOT ! XOR==

+ 位运算符 ==& | ^ ~ >> <<==



##### 排序

+ ORDER BY

  有WHERE和ORDER BY同时出现时，WHERE要放在FROM的后面，且先于ORDER BY；

  先找表，再根据WHERE对应的条件查值，再查找想要SELECT的字段，最后进行排序；

  ```mysql
  # 按照salary从高到低的顺序显示员工信息
  # 升序 ASC (ascend) 默认 降序 DESC (descend)
  SELECT employee_id,last_name,salary FROM employees ORDER BY salary DESC;
  # 使用列的别名进行排序
  SELECT employee_id,salary,salary * 12 annual_sal FROM employees ORDER BY annual_sal DESC;
  ```

+ 多列排序

  ```mysql
  SELECT last_name, department_id, salary
  FROM   employees
  ORDER BY department_id, salary DESC;
  ```

  - 可以使用不在SELECT列表中的列排序。
  - 在对多列进行排序的时候，首先排序的第一列必须有相同的列值，才会对第二列进行排序。如果第一列数据中所有值都是唯一的，将不再对第二列进行排序。

##### 分页

+ LIMIT

  ```mysql
  LIMIT (pageNo - 1) * pageSize, pageSize
  # LIMIT (偏移量，条目个数)
  LIMIT (0,20) == LIMIT 20;
  ```

+ WHERE ... ORDER BY ... LIMIT 声明顺序：先写WHERE 再写ORDER BY 最后写LIMIT

  ```mysql
  SELECT employee_id,last_name,salary FROM employees
  WHERE salary > 6000
  ORDER BY salary DESC
  LIMIT 0,10;
  ```

+ mysql 8.0新特性： LIMIT ... OFFSET ...

  ```mysql
  # 共有107条数据，只想显示第32，33条
  SELECT employee_id,last_name FROM employees 
  LIMIT 2 OFFSET 31;
  ```



##### 多表查询

如果有n个表实现多表的查询，则最少需要n-1个连接条件。

如果给表起了别名，一旦在SELECT和WHERE中使用表名的话，则必须使用表的别名，而不能再使用表的原名。

```mysql
# 查询员工的employee_id,last_name.department_name,city
SELECT emp.employee_id,emp.last_name,dept.department_name,locations.city
FROM employees emp,departments dept,locations
WHERE emp.`department_id` = dept.`department_id`
AND dept.`location_id` = locations.`location_id`;
```

> 演绎式：提出问题1 —> 解决问题1 —> 提出问题2 —> 解决问题2
>
> 归纳式：总 — 分



###### 多表查询的分类

+ 根据连接条件：等值连接 vs 非等值连接

  ```mysql
  # 非等值连接
  SELECT e.last_name,e.salary,j.grade_level
  FROM employees e,job_grades j
  WHERE e.`salary` >= j.`lowest_sal` AND e.`salary` <= j.`highest_sal`;
  ```

+ 自连接 vs 非自连接

  ```mysql
  # 自连接 自恋
  # 查询员工id，员工姓名极其管理者的id和姓名
  SELECT emp.employee_id,emp.last_name,mgr.employee_id,mgr.last_name
  FROM employees emp,employees mgr
  WHERE emp.`manager_id` = mgr.`employee_id`;
  ```

  

+ 内连接 vs 外连接



##### 其它

+ 引号的使用

  字符或字符串用单引号，日期时间但银行，常量入表单引号，取别名时使用双引号。



#### 过滤数据

+ 基本过滤

  ```mysql
  # 查询90号部门的员工信息
  SELECT * FROM employees WHERE department_id = 90;
  
  # 查询last_name 为'KING'的员工信息
  SELECT * FROM employees WHERE last_name = 'KING';
  ```

  